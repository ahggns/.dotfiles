#!/usr/bin/env zsh

zmodload zsh/zprof # Load zprof module, which provides profiling functions

source "$DOTFILES/zsh/prompt.zsh"

if [ "$(uname)" = "Darwin" ]; then
    eval "$(/opt/homebrew/bin/brew shellenv)"
else
    eval "$(/home/linuxbrew/.linuxbrew/bin/brew shellenv)"
fi

source "$DOTFILES/zsh/alias.zsh"
source "$DOTFILES/zsh/autocomplete.zsh"
source "$DOTFILES/zsh/bindings.zsh"
source "$DOTFILES/zsh/vim-mode.zsh"
source "$DOTFILES/zsh/plugins/zsh-syntax-highlighting.git/zsh-syntax-highlighting.zsh"

eval "$(gdircolors -b $DOTFILES/zsh/colors/nord.git/src/dir_colors)"

eval "$(pyenv init -)"
path+=(
    $HOME/.local/bin
    /Applications/Sublime\ Text.app/Contents/SharedSupport/bin
    /Applications/Visual\ Studio\ Code.app/Contents/Resources/app/bin
    /Applications/Xcode.app/Contents/MacOS/
    /Applications/IntelliJ\ IDEA\ CE.app/Contents/MacOS/
    /opt/homebrew/opt/libpq/bin
)

#display working directory in title bar
precmd() {
    echo -ne "\033]0;${PWD##*/}\007"
}

# History configuration
export HISTSIZE=100000
export SAVEHIST=100000

# History options
setopt INC_APPEND_HISTORY   # Immediately append to the history file, not overwriting it
setopt EXTENDED_HISTORY   # Save timestamp of each command in the history file
setopt SHARE_HISTORY   # Share history between all sessions
setopt HIST_IGNORE_DUPS   # Do not record an entry that was just recorded again
setopt HIST_IGNORE_ALL_DUPS   # Delete old recorded entry if new entry is a duplicate
setopt HIST_FIND_NO_DUPS   # Do not display a previously found entry
setopt HIST_REDUCE_BLANKS   # Remove superfluous blanks before recording entry
setopt HIST_IGNORE_SPACE   # Do not record an entry starting with a space
setopt HIST_SAVE_NO_DUPS   # Do not write duplicate entries in the history file
setopt HIST_VERIFY   # Show command with history expansion to user before running it
